{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "63645032_2fbf646f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2891
      },
      "writtenOn": "2023-11-06T20:36:24Z",
      "side": 1,
      "message": "This does fix the problem _but_ Scott tells me that it might not be recommended. I think you better discuss that first :)",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb4de830_e4ea86db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 597
      },
      "writtenOn": "2023-11-06T20:52:24Z",
      "side": 1,
      "message": "This is not a good idea IMO, and reverting it and having to document the new host requirement to build meta-flutter related things would be preferable (or some other option, see below).  BitBake runs Python tasks internally with compile+exec, so they are run with the host Python.  That Python is not necessarily always going to be compatible with a module built with and for python3-native.\n\nIf you do want to drop the need for pyyaml on the host, then another approach would be to inherit python3native, have python3-pyyaml-native in DEPENDS, and then either use a one-liner \"python3 -c blah\" or emit a script and run in a shell task.  I think that would be not too bad if the only thing you are getting from pubspec.yaml is the application name to check against PUBSPEC_APPNAME, it could just be in separate a task that runs before do_compile.  Another perhaps less optimal option would be to maybe just use a \u0027^name:\u0027 regular expression to get the name...",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "755dc1f9_8e4f8587",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2514
      },
      "writtenOn": "2023-11-06T21:33:27Z",
      "side": 1,
      "message": "Based on your statement it would indicate that the python3 used with OE originates from the system.  I am not sure that is correct.  That could cause potential issues with LTS.\n\nThe fix I added uses python3-pyyaml-native:\nhttps://github.com/meta-flutter/meta-flutter/commit/002cac33b6ee6deebd4e5bcc459eba2020bc3f31#diff-58c42d5bc2b77717fd8e70d3a8dba730094d39baad475630768317b84bf144b7",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e40ec80d_9d89a2e0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2514
      },
      "writtenOn": "2023-11-06T21:36:47Z",
      "side": 1,
      "message": "Also `python3-dir` sets `PYTHON_SITEPACKAGES_DIR` instead of `PYTHON_SITEPACKAGES_DIR`.  Go figure...",
      "parentUuid": "755dc1f9_8e4f8587",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d089c38e_88b33c74",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 597
      },
      "writtenOn": "2023-11-06T21:49:58Z",
      "side": 1,
      "message": "I have looked at the code inside BitBake that runs Python tasks, it runs them using compile+exec in the Python that\u0027s running BitBake itself, i.e. the host version (see exec_func_python in bitbake/lib/bb/build.py, and the compile and exec wrappers in bitbake/lib/bb/utils.py).  That has always been the case to my knowledge.  So as I said, your change will work sometimes, but not necessarily forever, and AFAIK it would be strongly discouraged by upstream to mix the host and -native Python this way.",
      "parentUuid": "e40ec80d_9d89a2e0",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2db51be8_5d314669",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2514
      },
      "writtenOn": "2023-11-06T21:57:16Z",
      "side": 1,
      "message": "Dump tail of os.environment with change + `inherit python3native`:\n\n```\nERROR: flutter-gallery-git-r0 do_compile: /home/joel/.local/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/local/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/local/lib/python3.11/site-packages/bmap_tools-3.7-py3.11.egg\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib64/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /mnt/raid10/agl/AGL/master/m3ulcb/tmp/work/aarch64-agl-linux/flutter-gallery/git-r0/recipe-sysroot-native/usr/lib/python3.10/site-packages\n```\nIt\u0027s mis-matched.\n\nDump tail of os.environment with this change set:\n```\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib64/python311.zip\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib64/python3.11\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib64/python3.11/lib-dynload\nERROR: flutter-gallery-git-r0 do_compile: /home/joel/.local/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/local/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/local/lib/python3.11/site-packages/bmap_tools-3.7-py3.11.egg\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib64/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /usr/lib/python3.11/site-packages\nERROR: flutter-gallery-git-r0 do_compile: /mnt/raid10/agl/AGL/master/m3ulcb/tmp/work/aarch64-agl-linux/flutter-gallery/git-r0/recipe-sysroot-native/usr/lib/python3.10/site-packages\n```\n\nBoth are mismatched, and it still works fine.\n\nIf you prefer a build dependency I can revert and add a note in README.md",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef12fbf7_90bb0f94",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2514
      },
      "writtenOn": "2023-11-06T22:32:55Z",
      "side": 1,
      "message": "Correction:  system path, not environment",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e33e726d_373c91b6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 4
      },
      "writtenOn": "2023-11-07T15:54:28Z",
      "side": 1,
      "message": "Joel: do you just need one value out of the yaml file ? Or is there more parsing to be done ?\n\nIMHO - could we settle on this approach:\n\n... inherit python3native, have python3-pyyaml-native in DEPENDS, and then either use a one-liner \"python3 -c blah\" or emit a script and run in a shell task.\n\n\nAka we use the python3-pyyaml-native, but called together with the python3native in a consitent environment ?",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41ff2693_d93a6a9c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 4
      },
      "writtenOn": "2023-11-10T15:53:23Z",
      "side": 1,
      "message": "As discussed during the IVI call, we\u0027ll change this commit to include the new patches sent to meta-flutter.",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2ab01c7_7db9fbb6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2891
      },
      "writtenOn": "2023-11-10T18:38:35Z",
      "side": 1,
      "message": "Seems things are agreed, so +1.",
      "revId": "063af9a97dfbe1aac53265d6172c1aca5a23fafb",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e"
    }
  ]
}